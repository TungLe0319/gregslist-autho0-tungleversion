let Auth0Provider,carsService,BaseController;_352‍.x([["CarsController",()=>CarsController]]);_352‍.w("@bcwdev/auth0provider",[["Auth0Provider",["Auth0Provider"],function(v){Auth0Provider=v}]]);_352‍.w("../services/CarsService.js",[["carsService",["carsService"],function(v){carsService=v}]]);_352‍.w("../utils/BaseController.js",[["default",["BaseController"],function(v){BaseController=v}]]);


       class CarsController extends BaseController {
  constructor() {
    super('api/cars');
    this.router
      .get('', this.getCars)
      //CHECKPOINT/MIDDLEWARE
     .use(Auth0Provider.getUserInfoFromBearerToken)
      .post('', this.createCar)
   
  }
async createCar(req, res, next){
try{
const formData= await req.body
const car = await carsService.createCar(formData)


formData.seller = req.userInfo.id


res.send(car)

} 
catch (error) {
next(error)
}
}

  async getCars(req, res, next) {
    try {
      const cars = await carsService.getCars();
 res.send(cars) ;
    } catch (error) {
     next(error)
    }
 
  }
}
